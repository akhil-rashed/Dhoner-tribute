<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A dhoner tribute designed for you bc</title>
    
    <!-- LUXURY FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Italiana&display=swap" rel="stylesheet">
    
    <!-- ICONS -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <!-- GSAP (Animation Engine) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        /* ==============================
           DESIGN TOKENS
           ============================== */
        :root {
            --bg-void: #030303;
            --accent-gold: #D4AF37;
            --text-primary: #EDEDED;
            --text-muted: #888888;
            --font-display: 'Italiana', serif;
            --font-body: 'Inter', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-void);
            color: var(--text-primary);
            font-family: var(--font-body);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            cursor: default; /* Reset cursor for mobile */
        }

        /* CUSTOM CURSOR (Hidden on mobile) */
        @media (min-width: 768px) {
            body { cursor: none; }
            .cursor-dot, .cursor-circle {
                position: fixed; top: 0; left: 0;
                transform: translate(-50%, -50%);
                pointer-events: none; z-index: 9999;
                border-radius: 50%;
            }
            .cursor-dot { width: 8px; height: 8px; background: #fff; }
            .cursor-circle { 
                width: 40px; height: 40px; 
                border: 1px solid rgba(255,255,255,0.3); 
                transition: width 0.3s, height 0.3s, background 0.3s;
            }
        }

        /* CANVAS & BG */
        #world {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1; opacity: 0.6; pointer-events: none;
        }

        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, #000000 120%);
            z-index: 2; pointer-events: none;
        }

        /* ==============================
           UI STRUCTURE (THE FIX IS HERE)
           ============================== */
        .wrapper {
            position: relative;
            z-index: 10;
            width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            padding: 20px;
        }

        .slide {
            position: absolute;
            width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            opacity: 0;
            visibility: hidden; /* FIX: Default to hidden */
            pointer-events: none; /* FIX: Default to no clicks */
            transition: visibility 0s linear 0.5s; /* Delay visibility change */
        }

        /* When slide is active, allow clicks */
        .slide.active-slide {
            visibility: visible;
            pointer-events: auto;
            transition-delay: 0s;
        }

        /* SPOTLIGHT CARD */
        .spotlight-card {
            position: relative;
            background: rgba(20, 20, 20, 0.65);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 40px 30px;
            max-width: 500px; width: 100%;
            text-align: center;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* TYPOGRAPHY */
        h1 {
            font-family: var(--font-display);
            font-size: clamp(3rem, 12vw, 5rem);
            color: #fff; margin-bottom: 15px;
            line-height: 1;
        }
        h2 {
            font-family: var(--font-display);
            font-size: 2rem; margin-bottom: 1rem;
            color: #fff;
        }
        p {
            font-size: 1rem; line-height: 1.6;
            color: var(--text-muted); margin-bottom: 30px;
        }
        .accent { color: var(--accent-gold); font-style: italic; }

        /* BUTTON (FIXED Z-INDEX) */
        .magnetic-btn {
            position: relative;
            z-index: 20; /* Ensure it's clickable */
            padding: 16px 36px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 100px;
            background: rgba(255,255,255,0.05);
            color: #fff;
            text-transform: uppercase;
            font-size: 0.8rem; letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .magnetic-btn:active { transform: scale(0.95); background: #fff; color: #000; }

        /* BENTO GRID */
        .bento-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
            width: 100%; margin-bottom: 25px;
        }
        .bento-item {
            background: rgba(255,255,255,0.03);
            padding: 15px; border-radius: 12px; text-align: left;
        }
        .bento-item.full { grid-column: span 2; }
        .bento-icon { font-size: 1.2rem; color: var(--accent-gold); display: block; margin-bottom: 5px; }
        .bento-title { font-size: 0.85rem; color: #fff; font-weight: 500; }
        .bento-desc { font-size: 0.75rem; color: #666; }

        /* LOADER */
        .loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000;
            display: flex; justify-content: center; align-items: center;
        }
        .loader-text { font-family: var(--font-display); color: var(--accent-gold); opacity: 0; }

        /* AUDIO BTN */
        .sound-ctrl {
            position: fixed; bottom: 30px; left: 30px; z-index: 50;
            display: flex; align-items: center; gap: 10px; opacity: 0.7;
        }
        .sound-bars { display: flex; gap: 3px; height: 15px; align-items: flex-end; }
        .s-bar { width: 2px; background: #fff; height: 2px; }
        .playing .s-bar { animation: sound 0.8s infinite ease-in-out; }
        .playing .s-bar:nth-child(2) { animation-delay: 0.1s; }
        .playing .s-bar:nth-child(3) { animation-delay: 0.2s; }
        @keyframes sound { 0%, 100% { height: 2px; } 50% { height: 15px; } }

    </style>
</head>
<body>

    <!-- CURSOR ELEMENTS -->
    <div class="cursor-dot"></div>
    <div class="cursor-circle"></div>

    <!-- LOADER -->
    <div class="loader">
        <div class="loader-text">Loading Dhoner Experience..</div>
    </div>

    <!-- AUDIO -->
    <audio id="bgm" loop>
        <source src="Bc Anthem Quwwali.mp3" type="audio/mpeg">
    </audio>

    <div class="sound-ctrl" onclick="toggleSound()">
        <div class="sound-bars">
            <div class="s-bar"></div>
            <div class="s-bar"></div>
            <div class="s-bar"></div>
        </div>
        <span style="font-size: 0.75rem; color: #fff; letter-spacing: 1px;">AUDIO</span>
    </div>

    <!-- 3D BACKGROUND -->
    <canvas id="world"></canvas>
    <div class="vignette"></div>

    <!-- SLIDES WRAPPER -->
    <div class="wrapper">

        <!-- SLIDE 0: HERO -->
        <div class="slide" id="slide-0">
            <div class="spotlight-card">
                <p style="font-size: 0.75rem; letter-spacing: 3px; color: var(--accent-gold); margin-bottom: 10px;">NEW DHONER CHAPTER</p>
                <h1>2026</h1>
                <p>A dhoner tribute designed for you bc..</p>
                <button class="magnetic-btn" onclick="nextSlide(1)">Begin Dhon'er Journey</button>
            </div>
        </div>

        <!-- SLIDE 1: MESSAGE -->
        <div class="slide" id="slide-1">
            <div class="spotlight-card">
                <i class="ph-light ph-star-of-david" style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 15px;"></i>
                <h2>Dearest Bokachoda</h2>
                <p>
                    Bokachoda type behaviour korte korte aro ekta bochor'er gand mere dilam amra, Insha-Allah next year 2026 e o eita bad dibo nah. <span class="accent">Backchodi on Top..</span>
                </p>
                <p style="font-size: 0.9rem; border-left: 2px solid var(--accent-gold); padding-left: 15px; text-align: left; color: #fff; font-style: italic;">
                    "Baki year gulo'r moto next er o gand mere dibo amra.."
                </p>
                <button class="magnetic-btn" onclick="nextSlide(2)">Highlights</button>
            </div>
        </div>

        <!-- SLIDE 2: BENTO -->
        <div class="slide" id="slide-2">
            <div class="spotlight-card">
                <h2>Dhon'festo</h2>
                <div class="bento-grid">
                    <div class="bento-item full">
                        <i class="ph-thin ph-sparkle bento-icon"></i>
                        <div class="bento-title">Backchodi on Top</div>
                        <div class="bento-desc">Always Backchodi kore jabo, je nished korbe ore cdi.. (if gurl/women then cdi)</div>
                    </div>
                    <div class="bento-item">
                        <i class="ph-thin ph-trend-up bento-icon"></i>
                        <div class="bento-title">Mutthi bad jabe nah</div>
                        <div class="bento-desc">Daily hentai + mutthi..</div>
                    </div>
                    <div class="bento-item">
                        <i class="ph-thin ph-heart bento-icon"></i>
                        <div class="bento-title">Gali to mon'er bhab</div>
                        <div class="bento-desc">Amra gali dei nah, jei bc bolbe amra gali dei. Or ma're cdi..</div>
                    </div>
                </div>
                <button class="magnetic-btn" onclick="nextSlide(3)">Final Note</button>
            </div>
        </div>

        <!-- SLIDE 3: CREDITS -->
        <div class="slide" id="slide-3">
            <div class="spotlight-card">
                <i class="ph-light ph-fingerprint" style="font-size: 2.5rem; opacity: 0.5; margin-bottom: 15px;"></i>
                <h2>Crafted with Backchodi</h2>
                <p>
                    Year jetai hok nah keno, amra backchodi korboi.. <span class="accent">Backchodi on Top..</span>
                </p>
                <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <p style="font-size: 0.65rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px;">Created By</p>
                    <h3 style="font-family: 'Italiana'; font-size: 1.4rem; color: #fff;">Akhil Rashed</h3>
                </div>
                <button class="magnetic-btn" style="margin-top: 20px; padding: 12px 30px;" onclick="location.reload()">Replay</button>
            </div>
        </div>

    </div>

    <!-- THREE.JS LIBRARY -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- 1. INITIALIZATION & LOADING ---
        window.addEventListener('load', () => {
            const tl = gsap.timeline();
            
            // Loader Animation
            tl.to('.loader-text', { opacity: 1, duration: 1 })
              .to('.loader', { y: '-100%', duration: 1.2, ease: 'power4.inOut', delay: 0.5 })
              // FIX: Only make the first slide active initially
              .call(() => {
                  document.getElementById('slide-0').classList.add('active-slide');
              })
              .to('#slide-0', { opacity: 1, duration: 1 })
              .from('#slide-0 .spotlight-card', { y: 30, opacity: 0, duration: 1, ease: 'power3.out' }, "-=0.5");
        });

        // --- 2. NAVIGATION LOGIC (THE FIX) ---
        let currentSlide = 0;
        
        function nextSlide(index) {
            // Audio check
            if(index === 1 && document.getElementById('bgm').paused) toggleSound();

            const outgoing = document.getElementById(`slide-${currentSlide}`);
            const incoming = document.getElementById(`slide-${index}`);

            // 1. Disable clicks on old slide immediately
            outgoing.classList.remove('active-slide');

            // 2. Animate Out
            gsap.to(outgoing, { 
                opacity: 0, 
                scale: 0.95, 
                duration: 0.8, 
                ease: 'power3.inOut' 
            });
            
            // 3. Enable new slide logic
            incoming.classList.add('active-slide');

            // 4. Animate In
            gsap.fromTo(incoming, 
                { opacity: 0, scale: 1.05 },
                { opacity: 1, scale: 1, duration: 0.8, ease: 'power3.inOut', delay: 0.2 }
            );

            currentSlide = index;
        }

        // --- 3. AUDIO ---
        const audio = document.getElementById('bgm');
        const soundBars = document.querySelector('.sound-bars');
        
        function toggleSound() {
            if(audio.paused) {
                audio.play();
                gsap.to(audio, { volume: 0.5, duration: 2 });
                soundBars.classList.add('playing');
            } else {
                gsap.to(audio, { volume: 0, duration: 1, onComplete: () => {
                    audio.pause();
                    soundBars.classList.remove('playing');
                }});
            }
        }

        // --- 4. CURSOR (Desktop Only) ---
        if(window.matchMedia("(min-width: 768px)").matches) {
            const dot = document.querySelector('.cursor-dot');
            const circle = document.querySelector('.cursor-circle');
            
            document.addEventListener('mousemove', (e) => {
                gsap.to(dot, { x: e.clientX, y: e.clientY, duration: 0.1 });
                gsap.to(circle, { x: e.clientX, y: e.clientY, duration: 0.3 });
            });
        }

        // --- 5. THREE.JS BACKGROUND ---
        const canvas = document.querySelector('#world');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 30;
        camera.position.y = 5;

        const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // Particles
        const count = 2000;
        const positions = new Float32Array(count * 3);
        for(let i=0; i<count*3; i++) {
            positions[i] = (Math.random() - 0.5) * 60; // Spread
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

        const material = new THREE.PointsMaterial({ 
            size: 0.15, 
            color: 0xD4AF37, 
            transparent: true, 
            opacity: 0.8 
        });

        const particles = new THREE.Points(geometry, material);
        scene.add(particles);

        // Animation Loop
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth/2) * 0.05;
            mouseY = (e.clientY - window.innerHeight/2) * 0.05;
        });

        const clock = new THREE.Clock();

        function animate() {
            const t = clock.getElapsedTime();
            
            // Wave Effect
            const pos = geometry.attributes.position.array;
            for(let i=0; i<count; i++) {
                const x = pos[i*3];
                // Sine wave motion based on X position and Time
                pos[i*3 + 1] = Math.sin(t * 0.5 + x * 0.1) * 2 + (Math.sin(t * 0.3 + x * 0.2)); 
            }
            geometry.attributes.position.needsUpdate = true;

            // Subtle Camera movement
            camera.position.x += (mouseX - camera.position.x) * 0.05;
            camera.position.y += (-mouseY + 5 - camera.position.y) * 0.05;

            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
              </html>
